@model IEnumerable<MvcPL.Models.FileViewModel>

@{
    ViewBag.Title = "Your file lib";
}

<center>
    <h2>Manage your files</h2>
    <table>
        <tr>
            <th>
                Your files list
            </th>
        </tr>
        <tr>
            <th>
                <div>
                   @using (Ajax.BeginForm("Upload", new AjaxOptions { UpdateTargetId = "searchresults", InsertionMode = InsertionMode.InsertAfter }))
                   {
                       <input id="fileInput" name="fileInput" type="file" />
                       <input type="button" value="Upload file" id="btnFileUpload" />
                   }
                </div>
            </th>
        </tr>

    </table>

    <table id="entries">
        <tr>
            <td><center><b>Название файла</b></center></td>
            <td><center><b>Дата загрузки</b></center></td>
            <td><center><b>Удалить</b></center></td>
            <td><center><b>Скачать</b></center></td>
        </tr>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Created)
                </td>
                <td>
                    @Html.ActionLink("Удалить","Delete",item)
                </td>
            </tr>
        }
    </table>
</center>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/scripts/jquery-1.10.2.js")
    @Scripts.Render("~/scripts/jquery.unobtrusive-ajax.js")
    <script type="text/javascript">
        $("#btnFileUpload").click(function() {
            var formData = new FormData();
            var file = document.getElementById("fileInput").files[0];
            formData.append("fileInput", file);
            $('#entries').load("http://localhost:9026/FileWork/Upload", null, function () { alert("Файл успешно загружен"); });
        });
    </script>

}